ext {
    preDexLibs = !project.hasProperty('disablePreDex')

    version = '0.9.2'
    versionCode = 32
    minSdkVersion = 16
    targetSdkVersion = 26
    compileSdkVersion = 26
    buildToolsVersion = '26.0.0'

    // Frameworks and code only libraries
    kotlinVersion = '1.1.4-eap-11'
    ankoVersion = '0.10.0'
    supportLibraryVersion = '26.0.0-beta2'
    supportPreferenceVersion = '1.2.7'
    playServicesVersion = '11.0.2'
    eventBusVersion = '3.0.0'
    eventBusAnnotationVersion = '3.0.1'
    androidJobVersion = '1.1.11'
    proxerLibVersion = '-SNAPSHOT'
    ktaskVersion = '0.4.1'

    // UI components
    aboutLibrariesVersion = '5.9.6'
    materialDrawerVersion = '5.9.4'
    iconicsVersion = '2.8.9'
    communityMaterialTypefaceVersion = '1.9.32.1'
    crossfaderVersion = '1.5.0'
    materialAboutVersion = '2.1.0'
    subsamplingScaleImageViewVersion = '3.6.0'
    tabLayoutHelperVersion = '0.8.0'
    materialDialogsVersion = '0.9.4.5'
    flexboxVersion = '0.3.0'
    emojiIosVersion = '0.5.0-SNAPSHOT'
    exomediaVersion = '4.0.2'
    exoplayerVersion = 'r2.4.3'
    materialProgressBarVersion = '1.4.1'
    materialRatingBarVersion = '1.0.2'
    customtabsHelperVersion = '1.0.3'
    introductionVersion = '1.4.1'
    materialBadgeViewVersion = '-SNAPSHOT'

    // Utils
    threetenVersion = '1.0.5'
    hawkVersion = '2.0.1'
    glideVersion = '4.0.0-SNAPSHOT'
    okHttpVersion = '3.8.1'
    okioVersion = '1.13.0'
    linkBuilderVersion = '1.5.2'
    easyHeaderFooterAdapterVersion = '2.0.0'

    // Debugging
    strictModeCompatVersion = "26.0.0"
    leakCanaryVersion = '1.5.1'

    deps = [
            kotlinStdlib                 : "org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion",
            anko                         : "org.jetbrains.anko:anko-commons:$ankoVersion",
            ankoSqlite                   : "org.jetbrains.anko:anko-sqlite:$ankoVersion",
            supportAppCompat             : "com.android.support:appcompat-v7:$supportLibraryVersion",
            supportV13                   : "com.android.support:support-v13:$supportLibraryVersion",
            supportRecyclerView          : "com.android.support:recyclerview-v7:$supportLibraryVersion",
            supportCardView              : "com.android.support:cardview-v7:$supportLibraryVersion",
            supportGridLayout            : "com.android.support:gridlayout-v7:$supportLibraryVersion",
            supportDesign                : "com.android.support:design:$supportLibraryVersion",
            supportAnimatedVectorDrawable: "com.android.support:animated-vector-drawable:$supportLibraryVersion",
            supportCustomtabs            : "com.android.support:customtabs:$supportLibraryVersion",
            supportPreference            : "com.android.support:preference-v7:$supportLibraryVersion",
            supportPreferenceFix         : "net.xpece.android:support-preference:$supportPreferenceVersion",
            supportPreferenceFixSpinner  : "net.xpece.android:support-spinner:$supportPreferenceVersion",
            playServicesGcm              : "com.google.android.gms:play-services-gcm:$playServicesVersion",
            eventBus                     : "org.greenrobot:eventbus:$eventBusVersion",
            eventBusAnnotation           : "org.greenrobot:eventbus-annotation-processor:$eventBusAnnotationVersion",
            androidJob                   : "com.evernote:android-job:$androidJobVersion",
            proxerLib                    : "com.github.proxer:ProxerLibJava:$proxerLibVersion",
            ktaskAndroid                 : "com.github.rubengees.ktask:ktask-android:$ktaskVersion",

            aboutLibraries               : "com.mikepenz:aboutlibraries:$aboutLibrariesVersion@aar",
            materialDrawer               : "com.mikepenz:materialdrawer:$materialDrawerVersion@aar",
            iconics                      : "com.mikepenz:iconics-core:$iconicsVersion@aar",
            communityMaterialTypeface    : "com.mikepenz:community-material-typeface:$communityMaterialTypefaceVersion@aar",
            crossfader                   : "com.mikepenz:crossfader:$crossfaderVersion@aar",
            materialAbout                : "com.github.daniel-stoneuk:material-about-library:$materialAboutVersion",
            subsamplingScaleImageView    : "com.davemorrissey.labs:subsampling-scale-image-view:$subsamplingScaleImageViewVersion",
            tabLayoutHelper              : "com.h6ah4i.android.tablayouthelper:tablayouthelper:$tabLayoutHelperVersion",
            materialDialogs              : "com.afollestad.material-dialogs:core:$materialDialogsVersion",
            flexbox                      : "com.google.android:flexbox:$flexboxVersion",
            emojiIos                     : "com.vanniktech:emoji-ios:$emojiIosVersion",
            exomedia                     : "com.devbrackets.android:exomedia:$exomediaVersion",
            exoplayer                    : "com.google.android.exoplayer:exoplayer-core:$exoplayerVersion",
            exoplayerIntegration         : "com.google.android.exoplayer:extension-okhttp:$exoplayerVersion",
            materialProgressBar          : "me.zhanghai.android.materialprogressbar:library:$materialProgressBarVersion",
            materialRatingBar            : "me.zhanghai.android.materialratingbar:library:$materialRatingBarVersion",
            customtabsHelper             : "me.zhanghai.android.customtabshelper:library:$customtabsHelperVersion",
            introduction                 : "com.github.rubengees:introduction:$introductionVersion",
            materialBadgeView            : "com.github.matrixxun:MaterialBadgeTextView:$materialBadgeViewVersion",

            threeten                     : "com.jakewharton.threetenabp:threetenabp:$threetenVersion",
            hawk                         : "com.orhanobut:hawk:$hawkVersion",
            glide                        : "com.github.bumptech.glide:glide:$glideVersion",
            glideOkHttp                  : "com.github.bumptech.glide:okhttp3-integration:$glideVersion",
            glideCompiler                : "com.github.bumptech.glide:compiler:$glideVersion",
            okHttp                       : "com.squareup.okhttp3:okhttp:$okHttpVersion",
            okio                         : "com.squareup.okio:okio:$okioVersion",
            linkBuilder                  : "com.klinkerapps:link_builder:$linkBuilderVersion",
            easyHeaderFooterAdapter      : "com.github.rubengees:easy-header-footer-adapter:$easyHeaderFooterAdapterVersion",

            strictModeCompat             : "com.kirich1409:strict-mode-compat:$strictModeCompatVersion",
            leakCanary                   : "com.squareup.leakcanary:leakcanary-android:$leakCanaryVersion",
            leakCanaryNoOp               : "com.squareup.leakcanary:leakcanary-android-no-op:$leakCanaryVersion"
    ]
}

buildscript {
    repositories {
        jcenter()
        google()
        maven { url "https://dl.bintray.com/kotlin/kotlin-eap-1.1" }
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.0-alpha6'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.4-eap-11"
    }
}

allprojects {
    repositories {
        jcenter()
        google()
        maven { url "https://jitpack.io" }
        maven { url "https://dl.bintray.com/kotlin/kotlin-eap-1.1" }
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
    }
}

subprojects {
    def appPlugin = "com.android.build.gradle.AppPlugin"
    def libraryPlugin = "com.android.build.gradle.LibraryPlugin"

    project.plugins.whenPluginAdded { plugin ->
        if (appPlugin == plugin.class.name || libraryPlugin == plugin.class.name) {
            project.android.dexOptions.preDexLibraries = rootProject.ext.preDexLibs
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.1-milestone-1'
}
